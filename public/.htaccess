RewriteEngine On

# Handle requests that don't point to a file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Security: Prevent access to sensitive files
<Files ~ "^\.(env|git|htaccess|htpasswd)">
    Order allow,deny
    Deny from all
</Files>

# Security: Prevent access to PHP files in assets directory
<FilesMatch "\.(php|php3|php4|php5|phtml)$">
    <If "%{REQUEST_URI} =~ m#^/assets/#">
        Order allow,deny
        Deny from all
    </If>
</FilesMatch>
